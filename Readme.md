# «Кексобукинг»
Кексобукинг — сервис размещения объявлений о сдаче в аренду недвижимости в центре Токио. Пользователям предоставляется возможность размещать объявления о своей недвижимости или просматривать уже размещённые объявления.

<img src="https://up.htmlacademy.ru/assets/intensives/javascript/23/projects/keksobooking/preview.jpg" width="636" height="360" alt="Кексобукинг">

## Состояния страницы

1 Неактивное состояние. 

При открытии страница находится в неактивном состоянии: 
 - На месте карты отображается серый прямоугольник.
 - Форма заполнения информации об объявлении .ad-form содержит класс ad-form--disabled;
 - Все интерактивные элементы формы .ad-form должны быть заблокированы с помощью атрибута disabled, добавленного на них или на их родительские блоки fieldset;
 - Форма с фильтрами .map__filters заблокирована так же, как и форма .ad-form — на форму добавлен специальный класс, а на её интерактивные элементы атрибуты disabled;

2  Активное состояние.

Загрузка и успешная инициализация карты (карта реализуется сторонней библиотекой Leaflet) переводит страницу в активное состояние. В активном состоянии страница позволяет вносить изменения в форму и отправлять её на сервер. После загрузки данных с сервера просматривать похожие объявления на карте, фильтровать их и уточнять подробную информацию о них, показывая для каждого из объявлений карточку.

## Заполнение информации

Заполнение всей информации производится на одной странице без промежуточных переходов. Порядок заполнения информации не важен. После заполнения всех данных, при нажатии на кнопку «Опубликовать», все данные из формы, включая изображения, с помощью AJAX-запроса отправляются на сервер https://23.javascript.pages.academy/keksobooking методом POST с типом multipart/form-data.

Страница реагирует на неправильно введённые значения в форму. Если данные, введённые в форму, не соответствуют ограничениям, указанным в разделе, описывающем поля ввода, форму невозможно отправить на сервер. При попытке отправить форму с неправильными данными, отправки не происходит, а неверно заполненные поля подсвечиваются красной рамкой. При успешной отправке формы или её очистке (нажатие на кнопку .ad-form__reset) страница, не перезагружаясь, переходит в состояние, когда:
 - все заполненные поля возвращаются в изначальное состояние;
 - фильтрация (состояние фильтров и отфильтрованные метки) сбрасывается;
 - метка адреса возвращается в исходное положение;
 - значение поля адреса корректируется соответственно исходному положению метки.

Если отправка данных прошла успешно, показывается соответствующее сообщение. Сообщение должно исчезать по нажатию на клавишу Esc и по клику на произвольную область экрана.

Если при отправке данных произошла ошибка запроса, показывается соответствующее сообщение. Сообщение должно исчезать после нажатия на кнопку .error__button, по нажатию на клавишу Esc и по клику на произвольную область экрана. В таком случае вся введённая пользователем информация сохраняется, чтобы у него была возможность отправить форму повторно.

## Сравнение с похожими объявлениями
Полный список похожих объявлений загружается после перехода страницы в активное состояние с сервера https://23.javascript.pages.academy/keksobooking/data. Данные с сервера могут быть получены не в полном объёме.
Если при загрузке данных с сервера произошла ошибка запроса, нужно показать соответствующее сообщение.
Каждое из объявлений показывается на карте в виде метки. При нажатии на метку похожего объявления, показывается балун (предоставляется API карт) с подробной информацией об объявлении. В каждый момент времени может быть показан только один балун, то есть нажатие на метку другого похожего объявления должно скрывать текущий балун, если он показан и показывать балун, соответствующий другому объявлению. Открытую карточку с подробной информацией можно закрыть нажатием на крестик в углу балуна. Объекты, расположенные неподалёку, можно фильтровать. Фильтрация производится при изменении значений соответствующих полей формы .map__filters по тем же параметрам, которые указываются для объявления:
 - тип жилья;
 - цена за ночь;
 - число комнат;
 - число гостей;
 - дополнительные удобства.
 
 Как до изменения фильтров, так и при изменении фильтра, на карте должны показываться все подходящие варианты, но не более 10 меток (не считая специальной), независимо от выбранного фильтра. Показанные метки должны удовлетворять всем выбранным фильтрам.
 Форма, с помощью которой производится фильтрация похожих объявлений на момент открытия страницы, заблокирована и становится доступной только после окончания загрузки всех похожих объявлений, которые в свою очередь начинают загружаться только после загрузки и успешной инициализации карты.
Отрисовка соответствующих выбранным фильтрам меток должна происходить не чаще, чем раз в полсекунды (устранение дребезга).
При изменении фильтров открытый балун (при наличии) должен быть скрыт.
